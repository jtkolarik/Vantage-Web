---
---

<section class="relative py-16 md:py-24 overflow-hidden">
  <div class="max-w-4xl mx-auto px-6">
    <div class="ascii-container text-center">
      <pre id="ascii-art" class="font-mono text-amber text-xs md:text-sm leading-tight inline-block transition-opacity duration-300"></pre>
    </div>
    <p class="text-center text-cream/50 text-sm mt-8 tracking-wider uppercase">A different perspective</p>
  </div>
</section>

<script>
  const frames = {
    telescope: `
                          *  .  *
                       .    *    .
                    *    .    .    *
                 .                   .
              *    ╔═══════════════╗   *
           .       ║               ║      .
        *          ║    ◯    ◯    ║         *
                   ║               ║
     .             ╚═══════╦═══════╝            .
                          ║
   *                      ║                       *
                          ║
  .            ═══════════╩═══════════            .
                     /         \\
   *               /             \\               *
                 /                 \\
    .          ▼                     ▼          .
                    looking up
`,
    eye: `

                      .  *  .  *  .
                  *         *         *
              .                           .
           *    ╭─────────────────────╮    *
         .      │ ╭─────────────────╮ │      .
        *       │ │                 │ │       *
       .        │ │    ╭───────╮    │ │        .
      *         │ │    │  ◉◉◉  │    │ │         *
       .        │ │    ╰───────╯    │ │        .
        *       │ ╰─────────────────╯ │       *
         .      ╰─────────────────────╯      .
           *                               *
              .                           .
                  *         *         *
                      .  *  .  *  .
                       seeing more
`,
    horizon: `
    *        .            *            .        *
         *          .           .          *
    .         *                       *         .
          .              *              .
   *                  .     .                  *
        .                                 .
   ─────────────────────────────────────────────
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
     ░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░
      ▒▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒
       ▓▓▓▓▓▓████████████████████████▓▓▓▓▓▓
        ████████████████████████████████████
         ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀
                   wider view
`,
    building: `
                          ┌─┐
                         ┌┘ └┐
                        ┌┘   └┐
                       ┌┘     └┐
                      ┌┘ ┌───┐ └┐
                     ┌┘  │ ▪ │  └┐
                    ┌┘   │   │   └┐
                   ┌┘    │ ▪ │    └┐
                  ┌┘     │   │     └┐
                 ┌┘  ┌───┼───┼───┐  └┐
                ┌┘   │ ▪ │ ▪ │ ▪ │   └┐
               ┌┘    │   │   │   │    └┐
              ┌┘     │ ▪ │ ▪ │ ▪ │     └┐
             ┌┘      │   │   │   │      └┐
            ┌┘   ════╧═══╧═══╧═══╧════   └┐
           ═╧═══════════════════════════════╧═
                    building up
`
  };

  const frameOrder = ['telescope', 'eye', 'horizon', 'building'];
  let currentFrame = 0;
  const asciiEl = document.getElementById('ascii-art');

  function morphTo(frameName: string) {
    if (!asciiEl) return;
    asciiEl.style.opacity = '0';
    setTimeout(() => {
      asciiEl.textContent = frames[frameName as keyof typeof frames];
      asciiEl.style.opacity = '1';
    }, 300);
  }

  // Initialize
  morphTo(frameOrder[0]);

  // Morph on scroll
  let lastScrollY = 0;
  let ticking = false;

  function updateFrame() {
    const section = asciiEl?.closest('section');
    if (!section) return;

    const rect = section.getBoundingClientRect();
    const viewportHeight = window.innerHeight;
    const sectionCenter = rect.top + rect.height / 2;
    const distanceFromCenter = Math.abs(sectionCenter - viewportHeight / 2);

    // Only animate when section is near center of viewport
    if (distanceFromCenter < viewportHeight * 0.6) {
      const progress = 1 - (distanceFromCenter / (viewportHeight * 0.6));
      const frameIndex = Math.min(
        Math.floor(progress * frameOrder.length),
        frameOrder.length - 1
      );

      if (frameIndex !== currentFrame) {
        currentFrame = frameIndex;
        morphTo(frameOrder[currentFrame]);
      }
    }

    ticking = false;
  }

  window.addEventListener('scroll', () => {
    if (!ticking) {
      requestAnimationFrame(updateFrame);
      ticking = true;
    }
  });

  // Also cycle on click for interaction
  asciiEl?.closest('section')?.addEventListener('click', () => {
    currentFrame = (currentFrame + 1) % frameOrder.length;
    morphTo(frameOrder[currentFrame]);
  });
</script>

<style>
  .ascii-container {
    min-height: 280px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  #ascii-art {
    white-space: pre;
    text-shadow: 0 0 20px rgba(212, 165, 116, 0.3);
  }
</style>
